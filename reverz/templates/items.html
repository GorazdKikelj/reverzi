{% extends 'base.html' %}
{% block title %}
Reverz items
{% endblock %}


{% block pagetitle %}

{% if request.path == url_for('reverz_add_page') %}
Novi reverz
{% else %}
Sprememba reverza
{% endif %}
{% endblock %}

{% block entryform %}
{% set add_path = request.path == url_for('reverz_add_page') %}
<div class="card text-center mb-3 bg-secondary" style="--bs-bg-opacity: .10;">
    <div class="card-body">
        <h3>{{ customer }}</br>
            {% if add_path %}
            Novi reverz</h3>
        <form action="{{url_for('reverz_add_new_page', id=customer_id)}}" method="POST" id="Inventar"">
        {% else %}
            Reverz {{ id }}</h3>
            <form action=" {{url_for('reverz_add_item', id=id)}}" method="POST" id="Inventar"">
        {% endif %}
                {{ reverz_form.hidden_tag() }}
                <div class=" form-group">
            {{ reverz_form.customer_person_id.label(class="form-label") }}
            {% if add_path %}
            {{ reverz_form.customer_person_id(class="form-control") }}
            {% else %}
            {{ reverz_form.customer_person_id(class="form-control", readonly="True") }}
            {% endif %}
    </div>
    <div class="form-group">
        {{ reverz_form.person_id.label(class="form-label") }}
        {% if add_path %}
        {{ reverz_form.person_id(class="form-control") }}
        {% else %}
        {{ reverz_form.person_id(class="form-control", readonly="True") }}
        {% endif %}
    </div>
    <div class="form-group">
        {{ reverz_form.description.label(class="form-label") }}
        {% if add_path %}
        {{ reverz_form.description(class="form-control") }}
        {% else %}
        {{ reverz_form.description(class="form-control", readonly="True") }}
        {% endif %}
    </div>
    <div class="form-group">
        {{ reverz_form.demo_start_date.label(class="form-label") }}
        {% if add_path %}
        {{ reverz_form.demo_start_date(class="form-control") }}
        {% else %}
        {{ reverz_form.demo_start_date(class="form-control", readonly="True") }}
        {% endif %}
    </div>
    <div class="form-group">
        {{ reverz_form.demo_end_date.label(class="form-label") }}
        {% if add_path %}
        {{ reverz_form.demo_end_date(class="form-control") }}
        {% else %}
        {{ reverz_form.demo_end_date(class="form-control", readonly="True") }}
        {% endif %}
    </div>
</div>
<div class="card-footer">
    {{ reverz_form.submit(class="btn btn-primary") }}
    <button class="btn ">
        <a class="btn btn-info" href="{{url_for('reverz_page')}}">Prekliči</a>
    </button>
</div>

</div>

{% endblock %}

{% block tableheader %}
<th data-valign="top"">Inv.št.</th>
<th data-valign=" top" data-field="produkt" data-filter-control="input" data-sortable="True">Produktna št. (Part No)
</th>
<th data-valign="top" data-field="serijska_st" data-filter-control="input" data-sortable="True">Serijska št. (Serial No)
</th>
<th data-valign="top" data-field="opis" data-filter-control="input" data-sortable="True">Opis</th>
<th data-valign="top" data-field="demo_pool" data-filter-control="input" data-sortable="True">Demo Pool</th>
<th data-valign="top">Akcija</th>
{% endblock %}

{% block tablerows %}
{% for row in inventory %}
{% set invst = row.get('inventarna_st') %}
<tr>
    <td>
        <div class="form-check">
            {{ reverz_form.getField(invst|string).label(class="form-label") }}
            {{ reverz_form.getField(invst|string)(class="form-control form-check-input btn-sm",
                default="True", form="Inventar") }}
        </div>
    </td>
    <td><span title="Notes: {{row.notes}}">{{ row.produkt }}</span></td>
    <td><span title="Notes: {{row.notes}}">{{ row.serijska_st }}</span></td>
    <td><span title="Notes: {{row.notes}}">{{ row.opis }}</span></td>
    <td>{{ row.demo_pool }}</td>
    <td>
        <div class="d-grid gap-2 d-md-flex justify-content-center">
            <button class="btn" title="Edit">
                <a href="{{url_for('inventory_edit', id=row.inventarna_st, product=row.produkt)}}" target="Item">
                    <i class="bi bi-pencil-square"></i>
                    </i></a>
            </button>
        </div>
    </td>
</tr>
{% endfor %}
{% endblock %}